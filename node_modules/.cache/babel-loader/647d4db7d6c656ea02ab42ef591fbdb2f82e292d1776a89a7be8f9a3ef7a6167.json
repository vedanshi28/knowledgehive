{"ast":null,"code":"import { appendErrors as r } from \"react-hook-form\";\nimport { validateFieldsNatively as e, toNestErrors as o } from \"@hookform/resolvers\";\nvar n = function (e, o) {\n    for (var n = {}; e.length;) {\n      var t = e[0],\n        s = t.code,\n        i = t.message,\n        a = t.path.join(\".\");\n      if (!n[a]) if (\"unionErrors\" in t) {\n        var u = t.unionErrors[0].errors[0];\n        n[a] = {\n          message: u.message,\n          type: u.code\n        };\n      } else n[a] = {\n        message: i,\n        type: s\n      };\n      if (\"unionErrors\" in t && t.unionErrors.forEach(function (r) {\n        return r.errors.forEach(function (r) {\n          return e.push(r);\n        });\n      }), o) {\n        var c = n[a].types,\n          f = c && c[t.code];\n        n[a] = r(a, o, n, s, f ? [].concat(f, t.message) : t.message);\n      }\n      e.shift();\n    }\n    return n;\n  },\n  t = function (r, t, s) {\n    return void 0 === s && (s = {}), function (i, a, u) {\n      try {\n        return Promise.resolve(function (o, n) {\n          try {\n            var a = Promise.resolve(r[\"sync\" === s.mode ? \"parse\" : \"parseAsync\"](i, t)).then(function (r) {\n              return u.shouldUseNativeValidation && e({}, u), {\n                errors: {},\n                values: s.raw ? i : r\n              };\n            });\n          } catch (r) {\n            return n(r);\n          }\n          return a && a.then ? a.then(void 0, n) : a;\n        }(0, function (r) {\n          if (function (r) {\n            return null != r.errors;\n          }(r)) return {\n            values: {},\n            errors: o(n(r.errors, !u.shouldUseNativeValidation && \"all\" === u.criteriaMode), u)\n          };\n          throw r;\n        }));\n      } catch (r) {\n        return Promise.reject(r);\n      }\n    };\n  };\nexport { t as zodResolver };","map":{"version":3,"names":["n","parseErrorSchema","e","o","length","t","s","code","i","message","a","path","join","u","unionErrors","errors","type","forEach","r","push","c","types","f","concat","shift","zodResolver","Promise","resolve","mode","then","shouldUseNativeValidation","values","raw","criteriaMode","reject"],"sources":["C:\\Users\\HP\\OneDrive\\Desktop\\MinorProject\\knowledgehive\\node_modules\\@hookform\\resolvers\\zod\\src\\zod.ts"],"sourcesContent":["import { appendErrors, FieldError, FieldErrors } from 'react-hook-form';\nimport { z, ZodError } from 'zod';\nimport { toNestErrors, validateFieldsNatively } from '@hookform/resolvers';\nimport type { Resolver } from './types';\n\nconst isZodError = (error: any): error is ZodError => error.errors != null;\n\nconst parseErrorSchema = (\n  zodErrors: z.ZodIssue[],\n  validateAllFieldCriteria: boolean,\n) => {\n  const errors: Record<string, FieldError> = {};\n  for (; zodErrors.length; ) {\n    const error = zodErrors[0];\n    const { code, message, path } = error;\n    const _path = path.join('.');\n\n    if (!errors[_path]) {\n      if ('unionErrors' in error) {\n        const unionError = error.unionErrors[0].errors[0];\n\n        errors[_path] = {\n          message: unionError.message,\n          type: unionError.code,\n        };\n      } else {\n        errors[_path] = { message, type: code };\n      }\n    }\n\n    if ('unionErrors' in error) {\n      error.unionErrors.forEach((unionError) =>\n        unionError.errors.forEach((e) => zodErrors.push(e)),\n      );\n    }\n\n    if (validateAllFieldCriteria) {\n      const types = errors[_path].types;\n      const messages = types && types[error.code];\n\n      errors[_path] = appendErrors(\n        _path,\n        validateAllFieldCriteria,\n        errors,\n        code,\n        messages\n          ? ([] as string[]).concat(messages as string[], error.message)\n          : error.message,\n      ) as FieldError;\n    }\n\n    zodErrors.shift();\n  }\n\n  return errors;\n};\n\nexport const zodResolver: Resolver =\n  (schema, schemaOptions, resolverOptions = {}) =>\n  async (values, _, options) => {\n    try {\n      const data = await schema[\n        resolverOptions.mode === 'sync' ? 'parse' : 'parseAsync'\n      ](values, schemaOptions);\n\n      options.shouldUseNativeValidation && validateFieldsNatively({}, options);\n\n      return {\n        errors: {} as FieldErrors,\n        values: resolverOptions.raw ? values : data,\n      };\n    } catch (error: any) {\n      if (isZodError(error)) {\n        return {\n          values: {},\n          errors: toNestErrors(\n            parseErrorSchema(\n              error.errors,\n              !options.shouldUseNativeValidation &&\n                options.criteriaMode === 'all',\n            ),\n            options,\n          ),\n        };\n      }\n\n      throw error;\n    }\n  };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}